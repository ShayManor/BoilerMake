<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>All Agents</title>
  <!-- Include Tailwind CSS via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white">
  <!-- Header -->
  <!-- Darker gray header with nav items on the left -->
  <header class="bg-gray-800 absolute inset-x-0 top-0 z-50">
    <!-- Reduced padding to px-2 to shift content left -->
    <nav class="max-w-7xl mx-auto px-2 py-4 flex items-center space-x-4" aria-label="Global">
      <!-- Text "logo" -->
      <div class="flex items-center">
        <a href="/" class="text-4xl font-bold text-white">
          SmithAI
        </a>
      </div>

      <!-- Desktop Navbar -->
      <div class="hidden lg:flex space-x-15">
        <a href="/agents"
           class="inline-block text-xl font-semibold text-white px-4 py-2 rounded hover:bg-gray-700 transition">
          Discover
        </a>
        <a href="/create"
           class="inline-block text-xl font-semibold text-white px-4 py-2 rounded hover:bg-gray-700 transition">
          Create
        </a>
        <a href="/about"
           class="inline-block text-xl font-semibold text-white px-4 py-2 rounded hover:bg-gray-700 transition">
          About
        </a>
      </div>

      <!-- Mobile menu button (shown only on small screens) -->
      <div class="lg:hidden">
        <button id="menuButton" type="button"
          class="-m-2.5 inline-flex items-center justify-center rounded-md p-2.5 text-white focus:outline-none">
          <span class="sr-only">Open main menu</span>
          <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
          </svg>
        </button>
      </div>
    </nav>

    <!-- Mobile Menu -->
    <div id="mobileMenu"
      class="hidden lg:hidden fixed inset-0 z-50 bg-gray-800 bg-opacity-95 p-6 transition duration-300"
      role="dialog" aria-modal="true">
      <div class="flex items-left justify-between">
        <a href="#" class="-m-1.5 p-1.5 flex items-center">
          <span class="sr-only">SmithAI</span>
          <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M12.9914 2.86904C12.9914 2.86899 ... 16.8722 12Z" />
          </svg>
        </a>
        <button id="mobileMenuButton" type="button"
          class="-m-2.5 rounded-md p-2.5 text-white focus:outline-none">
          <span class="sr-only">Close menu</span>
          <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
      <div class="mt-6 flex flex-col space-y-4">
        <a href="/agents"
           class="text-xl font-semibold text-white px-4 py-2 rounded hover:bg-gray-700 transition">
          Discover
        </a>
        <a href="/create"
           class="text-xl font-semibold text-white px-4 py-2 rounded hover:bg-gray-700 transition">
          Create
        </a>
        <a href="/about"
           class="text-xl font-semibold text-white px-4 py-2 rounded hover:bg-gray-700 transition">
          About
        </a>
      </div>
    </div>
  </header>

  <!-- Main Section -->
  <main class="relative isolate overflow-hidden pt-24 pb-12">
    <div class="mx-auto max-w-7xl px-6 lg:px-8">
      <div class="mx-auto max-w-2xl text-center">
        <h1 class="text-5xl font-bold tracking-tight text-white sm:text-7xl">All Agents</h1>
        <p class="mt-4 text-lg font-medium text-gray-300">
          Discover a variety of innovative agents ready to assist you.
        </p>
      </div>
      <!-- Refresh Button -->
      <div class="mt-10 flex justify-center">
        <button id="loadAgents" class="rounded-md bg-indigo-500 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-400 transition">
          Load Agents
        </button>
      </div>
      <!-- Grid container for agent cards -->
      <ul id="agentsList" role="list" class="mt-10 grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3">
        <!-- Agent cards will be inserted here -->
      </ul>
    </div>
  </main>

  <!-- Footer Section -->
  <footer class="bg-gray-900">
    <div class="mx-auto max-w-7xl overflow-hidden px-6 pt-10 pb-6 lg:px-8">
      <nav class="-mb-6 flex flex-wrap justify-center gap-x-12 gap-y-3 text-sm" aria-label="Footer">
        <a href="/agents" class="text-gray-400 hover:text-white transition">Discover</a>
        <a href="/create" class="text-gray-400 hover:text-white transition">Create</a>
        <a href="/about" class="text-gray-400 hover:text-white transition">About</a>
      </nav>
      <p class="mt-10 text-center text-sm text-gray-400">
        &copy; 2025 Your Company, Inc. All rights reserved.
      </p>
    </div>
  </footer>

  <!-- JavaScript for Navbar Toggle and Agents Loading -->
  <script>
    // Navbar toggle
    const menuButton = document.getElementById('menuButton');
    const mobileMenu = document.getElementById('mobileMenu');
    const mobileMenuButton = document.getElementById('mobileMenuButton');

    menuButton.addEventListener('click', () => {
      mobileMenu.classList.remove('hidden');
    });

    mobileMenuButton.addEventListener('click', () => {
      mobileMenu.classList.add('hidden');
    });

    // Function to fetch and display all agents
    function loadAgents() {
      fetch('/api/agents')
        .then(response => response.json())
        .then(data => {
          const agentsList = document.getElementById('agentsList');
          agentsList.innerHTML = ''; // Clear any existing content

          if (data.agents && data.agents.length > 0) {
            data.agents.forEach(agent => {
              // Create a new list item for each agent with a modern dark card style.
              const li = document.createElement('li');
              li.className = "col-span-1 rounded-lg bg-gray-800 p-6 shadow hover:shadow-xl transition transform hover:scale-105";

              li.innerHTML = `
                <div class="flex items-center space-x-4">
                  <img class="h-12 w-12 rounded-full object-cover" src="https://via.placeholder.com/150" alt="Agent Avatar">
                  <div>
                    <h3 class="text-lg font-semibold text-white">${agent.agentName}</h3>
                    <p class="text-sm text-gray-400">${agent.modelType || "Model"}</p>
                  </div>
                </div>
                <p class="mt-4 text-gray-300">${agent.description}</p>
              `;
              agentsList.appendChild(li);
            });
          } else {
            agentsList.innerHTML = '<p class="text-center text-gray-500">No agents found.</p>';
          }
        })
        .catch(error => {
          console.error('Error loading agents:', error);
          document.getElementById('agentsList').innerHTML = '<p class="text-center text-red-500">Error loading agents.</p>';
        });
    }

    // Add event listener to the load button and auto-load agents on page load
    document.getElementById('loadAgents').addEventListener('click', loadAgents);
    window.onload = loadAgents;
  </script>
</body>
</html>
